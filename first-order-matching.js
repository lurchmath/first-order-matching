var CLSetToString,CLToString,CToString,Constraint,ConstraintList,OM,OMNode,ProblemStore,alphaEquivalent,applyExpressionFunction,bindingConstraints1,bindingConstraints2,clearMetavariable,composeIterator,concatenateIterators,consistentPatterns,differenceIterator,expressionDepth,expressionFunction,expressionFunctionApplication,filterIterator,findDifferencesBetween,getSolution,isExpressionFunction,isExpressionFunctionApplication,isMetavariable,makeExpressionFunction,makeExpressionFunctionApplication,matchDebug,matchDebugOn,metavariableSymbol,multiReplace,newProblem,nextMatch,parentAddresses,partitionedAddresses,prefixIterator,ref,sameDepthAncestors,satisfiesBindingConstraints1,satisfiesBindingConstraints2,setMatchDebug,setMetavariable,subexpressionIterator,suffixIterator,trueValue,slice=[].slice,indexOf=[].indexOf||function(n){for(var t=0,e=this.length;t<e;t++)if(t in this&&this[t]===n)return t;return-1};"undefined"!=typeof require&&null!==require&&(ref=require("openmath-js"),OM=ref.OM,OMNode=ref.OMNode),"undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope?importScripts("openmath.js"):null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0)&&importScripts("node_modules/openmath-js/openmath.js"),metavariableSymbol=OM.symbol("metavariable","FirstOrderMatching"),trueValue=OM.string("true"),setMetavariable=function(n){var t;if(n instanceof OMNode&&("v"===(t=n.type)||"sy"===t))return n.setAttribute(metavariableSymbol,trueValue.copy())},clearMetavariable=function(n){return n.removeAttribute(metavariableSymbol)},isMetavariable=function(n){var t,e;return n instanceof OMNode&&("v"===(t=n.type)||"sy"===t)&&(null!=(e=n.getAttribute(metavariableSymbol))?e.equals(trueValue):void 0)},expressionFunction=OM.symbol("EF","FirstOrderMatching"),expressionFunctionApplication=OM.symbol("EFA","FirstOrderMatching"),makeExpressionFunction=function(n,t){if("v"!==n.type)throw"When creating an expression function, its parameter must be a variable";return OM.bin(expressionFunction,n,t)},isExpressionFunction=function(n){return"bi"===n.type&&1===n.variables.length&&n.symbol.equals(expressionFunction)},makeExpressionFunctionApplication=function(n,t){return OM.app(expressionFunctionApplication,n,t)},isExpressionFunctionApplication=function(n){return"a"===n.type&&3===n.children.length&&n.children[0].equals(expressionFunctionApplication)},applyExpressionFunction=function(n,t){var e;return(e=n.body.copy()).replaceFree(n.variables[0],t),e},alphaEquivalent=function(n,t){var e,r,i,s,o,a;for(i=0,o=function(){return OM.var("v"+i)},s=function(n){return n.equals(o())},a=OM.app(n,t);a.hasDescendantSatisfying(s);)i++;return e=applyExpressionFunction(n,o()),r=applyExpressionFunction(t,o()),isExpressionFunction(n)&&isExpressionFunction(t)&&e.equals(r)},consistentPatterns=function(){var n,t,e,r,i,s,o,a,u,l,c,p,f;for(o=[],t=[],e=0,i=(a=1<=arguments.length?slice.call(arguments,0):[]).length;e<i;e++)for(r=0,s=(u=a[e].descendantsSatisfying(isMetavariable)).length;r<s;r++)if(n=u[r],isExpressionFunctionApplication(n.parent)&&"c1"===n.findInParent()){if(l=n.name,indexOf.call(o,l)>=0)return!1;c=n.name,indexOf.call(t,c)<0&&t.push(n.name)}else{if(p=n.name,indexOf.call(t,p)>=0)return!1;f=n.name,indexOf.call(o,f)<0&&o.push(n.name)}return!0},Constraint=function(){function n(n,t){this.pattern=n,this.expression=t}return n.prototype.copy=function(){return new n(this.pattern.copy(),this.expression.copy())},n.prototype.equals=function(n){return this.pattern.equals(n.pattern,!1)&&this.expression.equals(n.expression,!1)},n}(),ConstraintList=function(){function n(){var n,t,e,r,i,s,o,a,u,l,c,p,f;for(e=1<=arguments.length?slice.call(arguments,0):[],this.contents=e,this.nextNewVariableIndex=0,n=function(n){return function(t){if(/^v[0-9]+$/.test(t.name))return n.nextNewVariableIndex=Math.max(n.nextNewVariableIndex,parseInt(t.name.slice(1))+1)}}(this),f=function(n){return n.descendantsSatisfying(function(n){return"v"===n.type})},r=0,o=(l=this.contents).length;r<o;r++){for(i=0,a=(c=f((t=l[r]).pattern)).length;i<a;i++)n(c[i]);for(s=0,u=(p=f(t.expression)).length;s<u;s++)n(p[s])}}return n.prototype.nextNewVariable=function(){return OM.simple("v"+this.nextNewVariableIndex++)},n.prototype.length=function(){return this.contents.length},n.prototype.copy=function(){var t,e;return e=function(n,t,e){e.prototype=n.prototype;var r=new e,i=n.apply(r,t);return Object(i)===i?i:r}(n,function(){var n,e,r,i;for(i=[],n=0,e=(r=this.contents).length;n<e;n++)t=r[n],i.push(t.copy());return i}.call(this),function(){}),e.nextNewVariableIndex=this.nextNewVariableIndex,e},n.prototype.indexAtWhich=function(n){var t,e,r,i,s;for(e=r=0,i=(s=this.contents).length;r<i;e=++r)if(t=s[e],n(t))return e;return-1},n.prototype.plus=function(){var n,t,e,r,i;for(t=1<=arguments.length?slice.call(arguments,0):[],i=this.copy(),e=0,r=t.length;e<r;e++)n=t[e],-1===i.indexAtWhich(function(t){return t.equals(n,!1)})&&i.contents.push(n);return i},n.prototype.minus=function(){var n,t,e,r,i,s;for(t=1<=arguments.length?slice.call(arguments,0):[],s=this.copy(),r=0,i=t.length;r<i;r++)n=t[r],(e=s.indexAtWhich(function(t){return t.equals(n,!1)}))>-1&&s.contents.splice(e,1);return s},n.prototype.firstSatisfying=function(n){var t;return null!=(t=this.contents[this.indexAtWhich(n)])?t:null},n.prototype.firstPairSatisfying=function(n){var t,e,r,i,s,o,a,u,l,c;for(r=s=0,a=(l=this.contents).length;s<a;r=++s)for(t=l[r],i=o=0,u=(c=this.contents).length;o<u;i=++o)if(e=c[i],r!==i&&n(t,e))return[t,e];return null},n.prototype.isFunction=function(){var n,t,e,r,i,s;for(s=[],t=0,e=(r=this.contents).length;t<e;t++){if(n=r[t],!isMetavariable(n.pattern))return!1;if(i=n.pattern.name,indexOf.call(s,i)>=0)return!1;s.push(n.pattern.name)}return!0},n.prototype.lookup=function(n){var t,e,r,i;for(n instanceof OM||(n=OM.var(n)),setMetavariable(n),e=0,r=(i=this.contents).length;e<r;e++)if((t=i[e]).pattern.equals(n,!1))return t.expression;return null},n.prototype.apply=function(n){var t,e,r,i,s,o;for(t=0,e=(i=(s=n.copy()).descendantsSatisfying(isMetavariable)).length;t<e;t++)r=i[t],null!=(o=this.lookup(r))&&r.replaceWith(o);return s},n.prototype.equals=function(n){var t,e,r,i,s,o,a;for(e=0,i=(o=this.contents).length;e<i;e++)if(t=o[e],!n.firstSatisfying(function(n){return n.equals(t)}))return!1;for(r=0,s=(a=n.contents).length;r<s;r++)if(t=a[r],!this.firstSatisfying(function(n){return n.equals(t)}))return!1;return!0},n}(),findDifferencesBetween=function(n,t){var e,r;return e=[],(r=function(t,i){var s,o,a,u,l,c,p;if(t.type!==i.type)return e.push(t.address(n));if("bi"===t.type?(s=[t.symbol].concat(slice.call(t.variables),[t.body]),o=[i.symbol].concat(slice.call(i.variables),[i.body])):(s=t.children,o=i.children),s.length!==o.length||s.length+o.length===0&&!t.equals(i,!1))return e.push(t.address(n));for(p=[],u=l=0,c=s.length;l<c;u=++l)a=s[u],p.push(r(a,o[u]));return p})(n,t),e},parentAddresses=function(n){var t,e,r,i,s,o,a,u;for(o=[],e=0,i=n.length;e<i;e++)0!==(t=n[e]).length&&(u=JSON.stringify(t.slice(0,-1)),indexOf.call(o,u)<0&&o.push(u));if(0===o.length)return null;for(a=[],r=0,s=o.length;r<s;r++)t=o[r],a.push(JSON.parse(t));return a},partitionedAddresses=function(n){var t,e;return t=[],(e=function(r){var i,s,o,a,u,l,c,p,f;for(s=!1,o=0,u=t.length;o<u;o++)if(c=t[o],r.equals(c.subexpression,!1)){c.addresses.push(r.address(n)),s=!0;break}for(s||t.push({subexpression:r,addresses:[r.address(n)]}),f=[],a=0,l=(p=r.children).length;a<l;a++)i=p[a],f.push(e(i));return f})(n),t},expressionDepth=function(n){var t,e;return e=slice.call(n.children).concat(slice.call(n.variables)),n.body&&e.push(n.body),n.symbol&&e.push(n.symbol),1+Math.max.apply(Math,[0].concat(slice.call(function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(expressionDepth(t));return i}())))},sameDepthAncestors=function(n,t){var e,r,i,s,o,a,u,l,c,p,f,h,g,d,x,b,m,v,y,S,C;for(u=c=0,h=t.length;c<h;u=++c)for(r=t[u],s=expressionDepth(n.index(r)),l=p=0,g=t.length;p<g;l=++p)if(i=t[l],o=expressionDepth(n.index(i)),s!==o)return s>o&&(r=(m=[i,r])[0],i=m[1],u=(v=[l,u])[0],l=v[1]),r.slice(0,-1),a=t.slice(0),a[u]=r.slice(0,-1),sameDepthAncestors(n,a);for(y=[],f=0,d=t.length;f<d;f++)e=t[f],C=JSON.stringify(e),indexOf.call(y,C)<0&&y.push(C);for(S=[],b=0,x=y.length;b<x;b++)C=y[b],S.push(JSON.parse(C));return S},differenceIterator=function(n,t){var e,r;return r=sameDepthAncestors(n,findDifferencesBetween(n,t)),e=function(e){var r,i,s,o,a,u;for(s=0,a=e.length;s<a;s++)for(r=e[s],o=0,u=e.length;o<u;o++){if(i=e[o],!n.index(r).equals(n.index(i),!1))return!1;if(!t.index(r).equals(t.index(i),!1))return!1}return!0},function(){for(var t,i;null!=r&&!e(r);)t=parentAddresses(r),r=t&&sameDepthAncestors(n,t);return null!==(i=r)&&(t=parentAddresses(r),r=t&&sameDepthAncestors(n,t)),i}},subexpressionIterator=function(n){var t,e,r;return e=partitionedAddresses(n),r={next:e.shift(),rest:e,subsetIndex:1},t=function(){var e,i,s;return matchDebug("\t\tsubexpression iterator for",n.simpleEncode(),"next:",JSON.stringify(r.next.addresses),"rest:",JSON.stringify(function(){var n,t,e,i;for(i=[],n=0,t=(e=r.rest).length;n<t;n++)s=e[n],i.push(s.addresses);return i}()),"subsetIndex:",r.subsetIndex),r.subsetIndex<Math.pow(2,r.next.addresses.length)?(i=function(){var n,t,i;for(i=[],e=n=0,t=r.next.addresses.length;0<=t?n<t:n>t;e=0<=t?++n:--n)0<(r.subsetIndex&Math.pow(2,e))&&i.push(r.next.addresses[e]);return i}(),r.subsetIndex++,i):r.rest.length>0?(r.next=r.rest.shift(),r.subsetIndex=1,t()):null}},prefixIterator=function(n,t){var e;return e=!1,function(){return e?t():(e=!0,n)}},suffixIterator=function(n,t){var e;return e=!1,function(){var r;return null!==(r=n())||e||(r=t,e=!0),r}},composeIterator=function(n,t){return function(){var e;return(e=n())?t(e):null}},filterIterator=function(n,t){return function(){var e;for(e=n();e&&!t(e);)e=n();return e}},concatenateIterators=function(n,t){return function(){return n()||t()}},multiReplace=function(n,t,e){var r,i,s,o,a;for(a=n.copy(),i=0,s=t.length;i<s;i++)r=t[i],null!=(o=a.index(r))&&o.replaceWith(e.copy());return a},bindingConstraints1=function(n){var t,e,r,i,s,o,a,u,l,c,p,f,h,g,d,x;for(d=new ConstraintList,r=function(n){return"bi"===n.type},i=0,a=(f=n.descendantsSatisfying(r)).length;i<a;i++)for(s=0,u=(h=(e=f[i]).descendantsSatisfying(isMetavariable)).length;s<u;s++)if((c=h[s]).isFree(e))for(o=0,l=(g=e.variables).length;o<l;o++)x=g[o],isMetavariable(x)&&(p=new Constraint(x,c),t=function(n){return n.equals(p)},d.firstSatisfying(t)||d.contents.push(p));return d},satisfiesBindingConstraints1=function(n,t){var e,r,i,s,o;for(r=0,i=(s=t.contents).length;r<i;r++)if(e=s[r],o=n.lookup(e.pattern),n.lookup(e.expression).copy().occursFree(o))return!1;return!0},bindingConstraints2=function(n){var t,e,r,i,s,o;for(o=new ConstraintList,e=0,r=(s=n.descendantsSatisfying(isExpressionFunctionApplication)).length;e<r;e++)t=s[e],isMetavariable(t.children[1])&&(i=function(n,t,e){e.prototype=n.prototype;var r=new e,i=n.apply(r,t);return Object(i)===i?i:r}(Constraint,t.children.slice(1,3),function(){}),o.firstSatisfying(function(n){return n.equals(i)})||o.contents.push(i));return o},satisfiesBindingConstraints2=function(n,t){var e,r,i,s,o,a,u,l,c,p,f;for(o=0,u=(c=t.contents).length;o<u;o++)for(i=c[o],null==(s=n.lookup(i.pattern))&&matchDebug(CLToString(n),CLToString(t)),e=n.apply(i.expression),r=function(n){return n.equals(s.variables[0])},a=0,l=(p=s.body.descendantsSatisfying(r)).length;a<l;a++)if(f=p[a],!e.isFreeToReplace(f,s.body))return!1;return!0},CToString=function(n){return"("+n.pattern.simpleEncode()+","+n.expression.simpleEncode()+")"},CLToString=function(n){var t;return null===n?null:"{ "+function(){var e,r,i,s;for(s=[],e=0,r=(i=n.contents).length;e<r;e++)t=i[e],s.push(CToString(t));return s}().join(", ")+" }"},CLSetToString=function(n){var t;return null===n?null:"[\n"+function(){var e,r,i;for(i=[],e=0,r=n.length;e<r;e++)t=n[e],i.push("\t"+CLToString(t));return i}().join("\n")+"\n]"},matchDebugOn=!1,setMatchDebug=function(n){return matchDebugOn=n},matchDebug=function(){var n;if(n=1<=arguments.length?slice.call(arguments,0):[],matchDebugOn)return console.log.apply(console,n)},nextMatch=function(n,t,e){var r,i,s,o,a,u,l,c,p,f,h,g,d,x,b,m,v,y,S,C,M,I,E,D,F,O,A,w,q,T;if(null==t&&(t=new ConstraintList),null==e&&(e=null),n instanceof Constraint&&(n=new ConstraintList(n)),!(n instanceof ConstraintList))throw"Invalid first parameter, not a constraint list";if(matchDebug("\nmatchDebug",CLToString(n),CLToString(t),null!=e?"  ...ITERATOR...":""),null==e){if(0===n.length())return matchDebug("\tbase case, returning:",CLToString(t)),[t,null];if(null!=(l=n.firstSatisfying(function(n){return 0===n.pattern.children.length&&0===n.pattern.variables.length&&!isMetavariable(n.pattern)})))return l.pattern.equals(l.expression,!1)?(matchDebug("\tatomic case, recur:",CToString(l)),nextMatch(n.minus(l),t,e)):(matchDebug("\tatomic case, return null for",CToString(l)),[null,null]);if(E=function(n){return"bi"===n.type?[n.symbol].concat(slice.call(n.variables),[n.body]):n.children},null!=(l=n.firstSatisfying(function(n){return E(n.pattern).length>0&&!isExpressionFunctionApplication(n.pattern)})))return r=l.pattern,i=l.expression,r.type!==i.type?(matchDebug("\tnon-atomic case, type fail:",CToString(l)),[null,null]):(g=E(r),O=E(i),g.length!==O.length?(matchDebug("\tnon-atomic case, #children fail:",CToString(l)),[null,null]):(n=(D=n.minus(l)).plus.apply(D,function(){var n,t,e;for(e=[],h=n=0,t=g.length;n<t;h=++n)u=g[h],e.push(new Constraint(u,O[h]));return e}()),matchDebug("\tnon-atomic case, recur:",CToString(l)),nextMatch(n,t,e)));if(null!=(l=n.firstSatisfying(function(n){return isMetavariable(n.pattern)}))){if(s=t.lookup(l.pattern)){if(!l.expression.equals(s,!1))return matchDebug("\tmetavariable case, mismatch:",CToString(l)),[null,null];matchDebug("\tmetavariable case, already set:",CToString(l))}else matchDebug("\tmetavariable case, assigning:",CToString(l)),t=t.plus(l.copy());return nextMatch(n.minus(l),t,e)}if(null!=(I=n.firstPairSatisfying(function(n,t){return isExpressionFunctionApplication(n.pattern)&&isExpressionFunctionApplication(t.pattern)&&n.pattern.children[1].equals(t.pattern.children[1],!1)&&!n.expression.equals(t.expression,!1)})))return o=I[0],a=I[1],A=n.minus(o,a),b=o.pattern.children[1],q=o.pattern.children[2],T=a.pattern.children[2],p=o.expression,f=a.expression,x=function(t){var e;return e=n.nextNewVariable(),makeExpressionFunction(e,multiReplace(p,t,e))},e=differenceIterator(p,f),e=filterIterator(e,function(n){var e;return null==(e=t.lookup(b))||alphaEquivalent(e,x(n))}),e=composeIterator(e,function(n){var e;return e=t.lookup(b)?t.copy():t.plus(new Constraint(b,x(n))),[A.plus(new Constraint(q,p.index(n[0])),new Constraint(T,f.index(n[0]))),e,null]}),matchDebug("\tefa case 1 of 2, iterating:",CToString(o),CToString(a)),nextMatch(A,t,e);if(null!=(I=n.firstPairSatisfying(function(n,t){return isExpressionFunctionApplication(n.pattern)&&isExpressionFunctionApplication(t.pattern)&&n.pattern.children[1].equals(t.pattern.children[1],!1)&&n.expression.equals(t.expression,!1)})))return o=I[0],a=I[1],A=n.minus(o,a),b=o.pattern.children[1],q=o.pattern.children[2],T=a.pattern.children[2],c=o.expression,x=function(t){var e;return e=n.nextNewVariable(),makeExpressionFunction(e,multiReplace(c,t,e))},e=subexpressionIterator(c),e=filterIterator(e,function(n){var e;return null==(e=t.lookup(b))||alphaEquivalent(e,x(n))}),e=suffixIterator(e,[]),e=composeIterator(e,function(n){var e,r,i,s;if(i=x(n),s=t.lookup(b)){if(!alphaEquivalent(s,i))return null;e=t.copy()}else e=t.plus(new Constraint(b,i));return r=A,0!==n.length&&(r=r.plus(new Constraint(q,c.index(n[0])),new Constraint(T,c.index(n[0])))),[r,e,null]}),matchDebug("\tefa case 2 of 2, iterating:",CToString(o),CToString(a)),nextMatch(A,t,e);if(l=n.contents[0],!isExpressionFunctionApplication(l.pattern))throw Error("Invalid assumption in final case of matching");return A=n.minus(l),b=l.pattern.children[1],w=l.pattern.children[2],c=l.expression,(d=t.lookup(b))?(applyExpressionFunction(d,w),matchDebug("\tfinal case, applying known metavariable:",CToString(l)),nextMatch(A.plus(new Constraint(d,c)),t,e)):(x=function(t){var e;return e=n.nextNewVariable(),makeExpressionFunction(e,multiReplace(c,t,e))},e=subexpressionIterator(c),e=filterIterator(e,function(n){return null==(d=t.lookup(b))||alphaEquivalent(d,x(n))}),e=suffixIterator(e,[]),e=composeIterator(e,function(n){var e,r,i,s;if(matchDebug("\t\tnext subexpression, with subset",JSON.stringify(n),"solution",CLToString(t),"constraints",CLToString(A),"t",w.simpleEncode(),"e",c.simpleEncode(),"metavariable",b.simpleEncode()),i=x(n),s=t.lookup(b)){if(!alphaEquivalent(s,i))return null;e=t.copy()}else e=t.plus(new Constraint(b,i));return r=A,0!==n.length&&(r=r.plus(new Constraint(w,c.index(n[0])))),[r,e,null]}),matchDebug("\tfinal case, iterating:",CToString(l)),nextMatch(A,t,e))}return null===(m=e())?(matchDebug("\titerator case, next is null, done!"),[null,null]):(y=m[0],M=m[1],S=m[2],matchDebug("\titerator case, using iterator.next():",CLToString(y),CLToString(M),null!=S,"\n---\x3e"),F=nextMatch(y,M,S),C=F[0],v=F[1],null==C?(matchDebug("\n<---\n\tafter iterator recursion, no result; keep iterating..."),nextMatch(n,t,e)):null==v?(matchDebug("\n<---\n\tafter iterator recursion, got a unique solution:",CLToString(C)),[C,[n,t,e]]):(matchDebug("\n<---\n\tafter iterator recursion, got a(nother?) solution:",CLToString(C),"PLUS nextArguments",CLToString(v[0]),CLToString(v[1]),null!=v[2]),v[2]=concatenateIterators(v[2],e),[C,v]))},"undefined"!=typeof exports&&null!==exports&&(exports.setMetavariable=setMetavariable,exports.clearMetavariable=clearMetavariable,exports.isMetavariable=isMetavariable,exports.makeExpressionFunction=makeExpressionFunction,exports.isExpressionFunction=isExpressionFunction,exports.makeExpressionFunctionApplication=makeExpressionFunctionApplication,exports.isExpressionFunctionApplication=isExpressionFunctionApplication,exports.applyExpressionFunction=applyExpressionFunction,exports.alphaEquivalent=alphaEquivalent,exports.consistentPatterns=consistentPatterns,exports.Constraint=Constraint,exports.ConstraintList=ConstraintList,exports.findDifferencesBetween=findDifferencesBetween,exports.parentAddresses=parentAddresses,exports.partitionedAddresses=partitionedAddresses,exports.expressionDepth=expressionDepth,exports.sameDepthAncestors=sameDepthAncestors,exports.differenceIterator=differenceIterator,exports.subexpressionIterator=subexpressionIterator,exports.prefixIterator=prefixIterator,exports.suffixIterator=suffixIterator,exports.composeIterator=composeIterator,exports.filterIterator=filterIterator,exports.concatenateIterators=concatenateIterators,exports.multiReplace=multiReplace,exports.bindingConstraints1=bindingConstraints1,exports.satisfiesBindingConstraints1=satisfiesBindingConstraints1,exports.bindingConstraints2=bindingConstraints2,exports.satisfiesBindingConstraints2=satisfiesBindingConstraints2,exports.setMatchDebug=setMatchDebug,exports.nextMatch=nextMatch,exports.OM=exports.OMNode=OM),("undefined"!=typeof WorkerGlobalScope&&null!==WorkerGlobalScope||null!=("undefined"!=typeof self&&null!==self?self.importScripts:void 0))&&(ProblemStore={},newProblem=function(n,t,e){return ProblemStore[n]={bc1:bindingConstraints1(t),bc2:bindingConstraints2(t),results:[],args:[new ConstraintList(new Constraint(t,e))]}},getSolution=function(n){var t,e,r,i,s,o,a;if(null!=(i=ProblemStore[n])){if(null!=i.args?(a=(s=nextMatch.apply(null,i.args))[0],i.args=s[1]):a=null,null!=a&&satisfiesBindingConstraints1(a,i.bc1)&&satisfiesBindingConstraints2(a,i.bc2)){for(t=!1,e=0,r=(o=i.results).length;e<r;e++)if(o[e].equals(a)){t=!0;break}if(!t)return i.results.push(a),{name:n,solution:a,count:i.results.length,success:!0}}return null==i.args?{name:n,count:i.results.length,success:!1}:nextSolution(n)}},self.addEventListener("message",function(n){var t,e,r,i,s,o,a,u,l,c,p,f;switch(n.data[0]){case"newProblem":return u=n.data,u[0],a=u[1],t=u[2],e=u[3],newProblem(a,OM.decode(t),OM.decode(e));case"getSolution":if(l=n.data,l[0],a=l[1],null!=(f=getSolution(a))&&null!=f.solution){for(i={},s=0,o=(c=f.solution.contents).length;s<o;s++)i[(r=c[s]).pattern.name]=r.expression.encode();f.solution=i}return self.postMessage(f);case"deleteProblem":return p=n.data,p[0],a=p[1],delete ProblemStore[a]}}));
//# sourceMappingURL=first-order-matching.js.map
